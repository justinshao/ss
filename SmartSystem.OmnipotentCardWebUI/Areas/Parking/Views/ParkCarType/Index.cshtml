@{
    ViewBag.Title = "车类管理";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="/Scripts/parking/cartype.js?v=7" type="text/javascript"></script>
<script src="/Scripts/parking/cartypesingle.js?v=2" type="text/javascript"></script>
<script src="/Scripts/easyui/tree-searh-extend.js" type="text/javascript"></script>
<div class="easyui-layout" style="height: 500px; width: 500px" fit="true">
    <div region="west" split="true" title="车场信息" style="width: 250px;">
          <div style="margin:5px 0px 5px 5px; text-align:left">
            <input type="text" id="txtSearchTreeContent" style="width:150px" class="my_textbox"/>&nbsp;<input type="button" style="width: 60px;height: 28px" value="搜索" class="easyui-linkbutton" onclick="btnSearchTreeContent()"/>
        </div>
          <ul id="parkingTree"></ul>
    </div>
    <div region="center" title="车类信息" style="background: #eee;">
        <table fit="true" id="tableCarType">
        </table>
    </div>
</div>
<div id="divCarTypeBox" style="display: none">
    <form id="divCarTypeBoxForm" class="easyui-form">
    <div title="添加车类" style="padding: 20px;">
        <input type="hidden" name="PKID" id="PKID" />
        <input type="hidden" name="CarTypeID" id="CarTypeID" />
        <table cellpadding="3" class="table_open_window_edit">
            <tr>
                <td align="right" style="width:100px">
                    车类名称
                </td>
                <td>
                    <input id="txtCarTypeName" name="CarTypeName"  required="true" class="easyui-validatebox form-control"
                           missingmessage="不能为空" style="width:200px"/>
                </td>
            </tr>
            <tr>
                <td align="right" style="width:100px">
                    进出间隔
                </td>
                <td>
                    <input id="txtInOutTime" name="InOutTime" class="easyui-numberspinner form-control"
                           value="0" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:200px"/>秒
                </td>
            </tr>
            <tr>
                <td align="right" style="width:100px">
                    基础类型
                </td>
                <td>
                    <input id="cmbBaseTypeID" name="BaseTypeID" style=" width:200px"/>

                </td>
            </tr>
            <tr class="trItem amount custom" style="display: none">
                <td align="right" style="width:100px">
                    续费月金额
                </td>
                <td>
                    <input id="txtAmount" name="Amount" class="easyui-numberspinner form-control" value="0" data-options="min:0,increment:1,precision:2" missingmessage="不能为空" style="width:200px"/>元
                </td>
            </tr>
            <tr class="trItem seasonamount" style="display: none">
                <td align="right" style="width:100px">
                    续费季金额
                </td>
                <td>
                    <input id="txtSeason" name="SeasonAmount" class="easyui-numberspinner form-control" value="0" data-options="min:0,increment:1,precision:2" missingmessage="不能为空" style="width:200px" />元
                </td>
            </tr>
            <tr class="trItem yearamount" style="display: none">
                <td align="right" style="width:100px">
                    续费年金额
                </td>
                <td>
                    <input id="txtYear" name="YearAmount" class="easyui-numberspinner form-control" value="0" data-options="min:0,increment:1,precision:2" missingmessage="不能为空" style="width:200px" />元
                </td>
            </tr>
            <tr class="trItem avecustom" style="display: none">
                <td align="right" style="width:100px">
                    线上续期按月数
                </td>
                <td>
                    <input id="txtAveMonth" name="AveMonth" class="easyui-numberspinner form-control"
                           value="12" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:200px" />月
                </td>
            </tr>
            <tr class="trItem maxmonth maxcustom" style="display: none">
                <td align="right" style="width:100px">
                    线上续期最大月数
                </td>
                <td>
                    <input id="txtMaxMonth" name="MaxMonth" class="easyui-numberspinner form-control"
                           value="12" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:200px"/>月
                </td>
            </tr>
            <tr class="trItem maxseason" style="display: none">
                <td align="right" style="width:100px">
                    线上续期最大季数
                </td>
                <td>
                    <input id="txtMaxSeason" name="MaxSeason" class="easyui-numberspinner form-control"
                           value="4" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:200px" />季
                </td>
            </tr>
            <tr class="trItem maxyear" style="display: none">
                <td align="right" style="width:100px">
                    线上续期最大年数
                </td>
                <td>
                    <input id="txtMaxYear" name="MaxYear" class="easyui-numberspinner form-control"
                           value="1" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:200px" />年
                </td>
            </tr>
            <tr class="trItem maxmalue" style="display: none">
                <td align="right" style="width:100px">
                    线上充值最大金额
                </td>
                <td>
                    <input id="txtMaxValue" name="MaxValue" class="easyui-numberspinner form-control"
                           value="0" data-options="min:0,increment:1,precision:2" missingmessage="不能为空" style="width:200px"/>元
                </td>
            </tr>
            <tr class="trItem maxusemoney" style="display: none">
                <td align="right" style="width:100px">
                    每天最大额
                </td>
                <td>
                    <input id="txtMaxUseMoney" name="MaxUseMoney" class="easyui-numberspinner form-control"
                           value="0" data-options="min:0,increment:1,precision:2" missingmessage="不能为空" style="width:200px"/>元(0不限额)
                </td>
            </tr>
            <tr>
                <td align="right" style="width:100px">
                    识别类型
                </td>
                <td>
                    <input id="cmbLpDistinguish" name="LpDistinguish" style=" width:200px"/>
                </td>
            </tr>

            <tr class="trItem overduetotemp" style="display: none">
                <td align="right" style="width:100px">
                    过期
                </td>
                <td>
                    <input id="cmbOverdueToTemp" name="OverdueToTemp" style=" width:200px"/>
                </td>
            </tr>
            <tr id="trOverdueDays" style="display:none">
                <td align="right" style="width:100px">
                    过期延期可进入
                </td>
                <td>
                    <input id="txtMonthCardExpiredEnterDay" name="MonthCardExpiredEnterDay" class="easyui-numberspinner form-control"
                           value="0" data-options="min:0,increment:1,precision:0" missingmessage="不能为空" style="width:100px"/>(天) 0表示不延期
                </td>
            </tr>
            <tr class="trItem lotoccupy" style="display: none">
                <td align="right" style="width:100px">
                    车位占用
                </td>
                <td>
                    <input id="cmbLotOccupy" name="LotOccupy" style=" width:200px"/>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="checkbox" id="ckbRepeatIn" name="RepeatIn" value="1"/>重复入场
                    <input type="checkbox" id="ckbRepeatOut"  name="RepeatOut" value="1"/>重复出场
                    <input type="checkbox" id="ckbAffirmIn"  name="AffirmIn" value="1"/>入场确认
                    <input type="checkbox" id="ckbAffirmOut"  name="AffirmOut" value="1"/>出场确认
                    <input type="checkbox" name="AllowLose" id="ckbAllowLose" value="1"/>满车位可进<br />
                    <input type="checkbox" id="ckbInOutEditCar"  name="InOutEditCar" value="1"/>进出修改车位
                    <input type="checkbox" id="ckbCarNoLike"  name="CarNoLike" value="1"/>车牌模糊识别
                    <input type="checkbox" id="ckbIsAllowOnlIne"  name="IsAllowOnlIne" value="1"/>允许线上续期
                    <input type="checkbox" id="ckbIsDispatch"  name="IsDispatch" value="true"/>是否派遣车辆
                </td>
            </tr>
            <tr id="trAffirmInOutTime" style="display:none">
                <td align="right" style="width:100px">
                    出入场确认时间：
                </td>
                <td>
                    <input type="hidden" id="hiddUpdateAffirmIn" name="AffirmBegin"/>
                    <input type="hidden" id="hiddUpdateAffirmOut" name="AffirmEnd"/>
                    <select style="width:40px" class="form-select-control" id="sltStartHH">
                        @for (int i = 0; i < 24; i++) {
                        string hh = i.ToString("00");
                        <option value="@hh">@hh</option>
                    }
                    </select>
                    时间
                    <select style="width:40px" class="form-select-control" id="sltStartMM">
                        @for (int i = 0; i < 60; i++) {
                        string hh = i.ToString("00");
                        <option value="@hh">@hh</option>
                    }
                             </select>分
                    -
                    <select style="width:40px" class="form-select-control" id="sltEndHH">
                        @for (int i = 0; i < 24; i++) {
                        string hh = i.ToString("00");
                        <option value="@hh">@hh</option>
                    }
                    </select>
                    时
                    <select style="width:40px" class="form-select-control" id="sltEndMM">
                        @for (int i = 0; i < 60; i++) {
                        string hh = i.ToString("00");
                        <option value="@hh">@hh</option>
                    }
                    </select>
                    分
                </td>
            </tr>
        </table>
    </div>
    </form>
</div>
<div id="divParkCarTypeSingleBox" style="display: none">
    <form id="divParkCarTypeSingleBoxForm" class="easyui-form">
    <div title="单双车牌配置" style="padding: 20px;">
        <table cellpadding="3" class="table_open_window_edit" style="margin-top: -10px; margin-bottom: 5px;">
            <tr>
                <td style="width:100px">
                  星期：<span id="spanWeek" style="width:80px">&nbsp;</span>
                </td>
                <td>
                  类型：  <select style="width: 120px" id="sltSingleType" name="SingleType" class="my_select">
                        <option value="0">单双可进出</option>
                        <option value="1">单可进出</option>
                        <option value="2">双可进出</option>
                    </select>
                </td>
                <td>
                    <input type="button" class="easyui-linkbutton c1" style="width: 70px; height: 30px;  line-height: 30px;" value="保存修改" id="btnCarTypeSingle" onclick="return btnSubmitCarTypeSingle()" />
                  
                </td>
            </tr>
        </table>
        <div style="width: 100%; height: 100%; overflow: auto; overflow-x: hidden">
            <table cellpadding="3" class="table_open_window_edit my_table table_list" id="tableCarTypeSingle"
                style="width: 100%;">
                <thead>
                    <tr>
                        <th style="width: 40%">
                            星期
                        </th>
                        <th style="width: 20%">
                            类型
                        </th>
                        <th style="width: 30%">
                            操作
                        </th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <input type="hidden" name="CarTypeID" id="hiddCarTypeIdSingle" />
         <input type="hidden" name="SingleID" id="hiddSingleID" />
          <input type="hidden" name="Week" id="hiddWeek" />
    </div>
    </form>
</div>